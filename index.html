<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
  </head>
  <body class="mixpanel-platform-body">
    <table id='Results Table' width="100%"></table>
    <script>
      var filter = '(string(properties["Creative ID"]) == "19673" or string(properties["Creative ID"]) == "19726" or string(properties["Creative ID"]) == "19675")';
      MP.api.funnel('Ad Loaded', 'Install', {'where': filter, 'segment': 'Creative ID'}).done(function(results) {
        console.log(results);
        var res = {};
        var table = document.getElementById('Results Table');
        var row = table.insertRow(0);
        var name = row.insertCell(0);
        name.innerHTML = '<strong>Creative ID</strong>';
        var name = row.insertCell(1);
        name.innerHTML = '<strong>Ad Loaded Count</strong>';
        var name = row.insertCell(2);
        name.innerHTML = '<strong>Install Count</strong>';
        var name = row.insertCell(3);
        name.innerHTML = '<strong>Conversion %</strong>';
        var numSegments = 0;
        for (var key in results) {
          numSegments++;
          row = table.insertRow(numSegments);
          res[key] = {};
          res[key].id = key;
          for (k in results[key]) {
            res[key].loaded = res[key].loaded + results[key][k]['0'].count || results[key][k]['0'].count;
            res[key].install = res[key].loaded + results[key][k]['1'].count || results[key][k]['1'].count;
          }
        }
        console.log(res);
      });

      // Run queries and display results here
    </script>
  </body>
</html>
